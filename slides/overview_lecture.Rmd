---
title: "Writing a Reproducible Paper with WORCS"
author: "Caspar J. van Lissa"
output:
  xaringan::moon_reader:
    css: [default, metropolis, metropolis-fonts, 'custom.css']
    lib_dir: libs
    nature:
      highlightStyle: github
      highlightLines: true
      countIncrementalSlides: false
---
background-image: url("https://the-turing-way.netlify.app/_images/reproducibility.jpg")
background-size: 82% 82%

```{r setup, include=FALSE}
options(htmltools.dir.version = FALSE)
```

# Open science as a paradigm shift

#### Open Science creates opportunities to make science
- more reliable, 
- more collaborative, 
- more inclusive,
- more...

.footnote-bg[
(Artwork by Scriberia for [The Turing Way](https://the-turing-way.netlify.com/introduction/introduction), CC-BY)]

---
# Open science as a challenge?

It is a motivating goal, but often requires new familiarities and skills:
- new platforms
- new attributes
- new tools
- new...

--

#### TOP guidelines for Open Science: comprehensive, yet broad standards

1. **Citation** of literature, data, materials, and methods;
1. **Sharing** data;
1. **Sharing** the code required to reproduce analyses;
1. **Sharing** new research materials;
1. **Sharing** details of the design and analysis;
1. **Pre-registration** of studies before data collection;
1. **Pre-registration** of the analysis plan;
1. **Replication** of published results.

.footnote[[Nosek _et al._, 2015](https://osf.io/9f6gx/#!)]

---
# Introducing WORCS

### A **W**orkflow for **O**pen **R**eproducible **C**ode in **S**cience
- YES to open
- YES to reproducible
- YES to best practices...

--

### But attainable!

--

![learningcurve](images/learningcurve.svg)

.footnote[Pulling down the learning curve!]
---
# Facilitates meeting TOP guidelines

1. **Citation** of literature, data, materials, and methods;
1. **Sharing** data;
1. **Sharing** the code required to reproduce analyses;
1. **Sharing** new research materials;
1. **Sharing** details of the design and analysis;
1. **Pre-registration** of studies before data collection;
1. **Pre-registration** of the analysis plan;
1. _Replication of published results._

---
background-image: url(images/worcs_badge.png)
background-size: 30% 40%
background-position: right top
# The practice of WORCS

- Implemented for R users in an R package [`worcs`](https://github.com/cjvanlissa/worcs)

--

- Lightweight, flexible, streamlined
  
--

- Facilitates:
  - Comprehensive citation
  - Pre-registration
  - Sharing (synthetic) data
  - Pre-print submission

--
  
- Works with best (coding) practices:
  - Dynamic document generation
  - Version control with git
  - Dependency management

---
# Dynamic document

Combining narrative with code
Automatically generates figures and tables
Automatically renders results in text
Formatting options into 
Writing scientific reports in a format that interleaves written reports with blocks
99 of code used to conduct the analyses. The text is automatically formatted as a scientific
100 paper in several potential styles. When the text is formatted, the code blocks are evaluated
101 and their results are insterted in the text, or rendered as figures and tables.

---
# Dynamic documents



---
# Dynamic documents and WORCS




---
# Dynamic documents and WORCS



---
# Version control

#### Why do you need version control?

.pull-left[

- It will help you manage ~~your code~~ most of your files (it is like track changes on steroids: it applies to all files in a folder).

- It allows you to trace back your steps: if something breaks, you can figure out what happened.

- NO MORE thesis_final_final_SERIOUSLYFINAL.Rmd

even better:
- a good version control system allows you to collaborate and share!

- a good version control system facilitates experimentation!

]

.pull-right[
![final](http://www.phdcomics.com/comics/archive/phd101212s.gif)
]
---
# Version control

.pull-left-larger[
### What is git?
- Distributed Version Control system written by Linus Torvalds (of Linux fame)

- Allows you to log updates, branch your work (so you can experiment without losing the original!), and keep all backups, while efficiently using your storage

- Gives user a lot of control on what to track, and adds a narrative to changes ('commit comments')

- Current standard for code

- Open Source software written for the command line...

- ... but many GUI-clients exist nowadays, and most coding IDEs have built-in git.]
.pull-right-smaller[
#![git-logo](images/git-logo-small.svg)
![distributed](images/screenshots/distributed.png)

![git](https://imgs.xkcd.com/comics/git.png)
]


---
# Version control

# How does git work

1. Add the changed file(s) to the staging area, and commit the changes:
```bash
git add src/filename.py anotherfile.txt
git add config/configfile.json
git commit -m "My commit message"
```
OR

2. commit files directly, without staging:
```bash
git commit src/filename.py anotherfile.txt -m "My commit message"
```

NB: don't forget your commit message (try what happens if you do!).
![repo](images/swcarpentry/git-staging-area.svg)
.footnote[
Image credit:<br />
Software Carpentries
]


---
# Enjoy, and git responsibly!

- Commits should be atomic: comprehensive 'units' of changes.
  - **DO**: edit/add an .svg and add it to your .Rmd presentation in the same commit
  - **DON'T**: edit for a full day and put this in a single commit (or worse: forget to...)

- Commits should have informative messages so you (and others) can trace your steps

  ![git_commit](https://imgs.xkcd.com/comics/git_commit.png)

- Track most files; .gitignore those files you don't.

- Explore new ideas with branches, keep a stable version on `master`


---
# Do you want to learn more?

- A [Software Carpentry course on git](https://swcarpentry.github.io/git-novice/)

- A [version control + git tutorial](https://www.atlassian.com/git/tutorials/what-is-version-control) on Atlassian

- A [git cheatsheet](https://www.atlassian.com/git/tutorials/atlassian-git-cheatsheet) from Atlassian

- A book with [all the ins and outs of git](https://www.git-scm.com/book/en/v2) from the git website

![atlassian](images/atlassian/bubblediag.svg)

---
# Version control and WORCS




---
# Version control and WORCS




---
# Dependency management




---
# Dependency management




---
# Dependency management




---
# Dependency management and WORCS



---
# Dependency management and WORCS


---
# Tying it together: the `worc`flow

![overview](images/worcs_viz.png)



---
class:inverse, clear

background-image: url(https://raw.githubusercontent.com/cjvanlissa/worcs/master/paper/workflow_graph/workflow.png)
background-size: contain






---
# Tying it together: the `worc`flow 






---
# Tying it together: the `worc`flow 






---
# Tying it together: the `worc`flow 






---
class: center, inverse, middle

# Thank you




